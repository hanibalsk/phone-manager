# Device Registration Flow Test
# Tests device registration with display name and group ID

appId: three.two.bit.phonemanager.dev
name: Device Registration Flow

---
# Clear app state for clean test
- clearState

# Launch the app
- launchApp

# Wait for registration screen to appear
- extendedWaitUntil:
    visible:
      text: "Device Registration"
    timeout: 10000

# Hide keyboard if visible
- hideKeyboard

# Verify registration screen elements
- assertVisible:
    text: "Display Name"

- assertVisible:
    text: "Group ID"

# Scroll down to see Register button
- scrollUntilVisible:
    element:
      text: "Register"
    direction: DOWN

# Take screenshot of registration screen
- takeScreenshot: "registration_screen"

# Enter display name - tap on the input field area
- tapOn:
    text: "Display Name"

- inputText: "TestDevice"

# Hide keyboard
- hideKeyboard

# Enter group ID
- tapOn:
    text: "Group ID"

- inputText: "test-group-123"

# Hide keyboard before tapping Register
- hideKeyboard

# Scroll to Register button
- scrollUntilVisible:
    element:
      text: "Register"
    direction: DOWN

# Submit registration
- tapOn:
    text: "Register"

# Wait for next screen (could be permission dialog or home)
- extendedWaitUntil:
    notVisible:
      text: "Device Registration"
    timeout: 15000

# Take screenshot of result
- takeScreenshot: "registration_result"
