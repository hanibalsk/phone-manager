# Device Registration Flow Test
# Tests initial device registration on first app launch

appId: three.two.bit.phonemanager.dev
name: Device Registration Flow

---
# Clear app state for clean test
- clearState

# Launch the app
- launchApp

# Wait for registration screen to appear
- extendedWaitUntil:
    visible:
      id: "registration_screen"
    timeout: 10000

# Verify registration screen elements are present
- assertVisible:
    id: "display_name_input"

- assertVisible:
    id: "group_id_input"

- assertVisible:
    id: "register_button"

# Take screenshot of registration screen
- takeScreenshot: "registration_screen"

# Enter display name
- tapOn:
    id: "display_name_input"

- inputText: "TestDevice"

- hideKeyboard

# Enter group ID
- tapOn:
    id: "group_id_input"

- inputText: "test-group"

- hideKeyboard

# Submit registration
- tapOn:
    id: "register_button"

# Wait for home screen (successful registration)
- extendedWaitUntil:
    visible:
      id: "home_screen"
    timeout: 15000

# Take screenshot of successful registration
- takeScreenshot: "registration_success"
