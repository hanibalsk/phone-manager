# Shared App Setup Steps
# Reusable app setup flow that can be included in other tests
# Note: The app shows a device registration screen on first launch

appId: three.two.bit.phonemanager.dev
name: Shared Login Steps

---
# Clear app state
- clearState

# Launch the app
- launchApp

# Wait for app to load
- waitForAnimationToEnd

# Take a screenshot to see initial state
- takeScreenshot: "app_initial_state"

# Wait for registration screen to appear (using text to verify app launched)
- extendedWaitUntil:
    visible:
      text: "Device Registration"
    timeout: 15000

# Take screenshot of registration screen
- takeScreenshot: "registration_screen_visible"

# Enter display name - tap on field
- tapOn:
    text: "Display Name"

- inputText: "TestDevice"

- hideKeyboard

# Enter group ID - tap on field
- tapOn:
    text: "Group ID"

- inputText: "test-group"

- hideKeyboard

# Take screenshot before submit
- takeScreenshot: "registration_form_filled"

# Tap Register button
- tapOn:
    text: "Register"

# Wait for home screen after registration (using settings button presence)
- extendedWaitUntil:
    visible:
      text: "Location Tracking"
    timeout: 15000

# Take screenshot of successful registration
- takeScreenshot: "registration_complete"
