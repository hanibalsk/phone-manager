# Shared App Setup Steps
# Reusable app setup flow that can be included in other tests
# Note: The app shows a device registration screen on first launch

appId: three.two.bit.phonemanager.dev
name: Shared Login Steps

---
# Clear app state
- clearState

# Launch the app
- launchApp

# Wait for app to load
- waitForAnimationToEnd

# Take a screenshot to see current state
- takeScreenshot: "app_launch_state"

# Wait for registration screen to appear
- extendedWaitUntil:
    visible:
      id: "registration_screen"
    timeout: 10000

# Enter display name
- tapOn:
    id: "display_name_input"

- inputText: "TestDevice"

- hideKeyboard

# Enter group ID
- tapOn:
    id: "group_id_input"

- inputText: "test-group"

- hideKeyboard

# Tap Register button
- tapOn:
    id: "register_button"

# Wait for home screen after registration
- extendedWaitUntil:
    visible:
      id: "home_screen"
    timeout: 15000

# Take screenshot of successful registration
- takeScreenshot: "registration_complete"
